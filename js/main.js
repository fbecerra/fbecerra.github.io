const projects = [
    {
        "dir": "projects/giving-dashboard/",
        "img_format": "png",
        "img_alt": "Dashboard that shows trends for donations in the United States.",
        "tags": [
            "d3.js",
            "dataviz"
        ],
        "title": "Giving Dashboard",
        "description": "A snapshot of the many ways Americans give",
        "details_title": "Giving Dashboard",
        "details": "Colleting information from different sources of data, this dashboard gives an overview of the different ways Americans give, including donations to tax-exempt nonprofits, crowdfunding, impact investing, donor-advised funds, and digital giving, among others. The figures in this dashboard represent indicators that illuminate the dominant trends shaping the contemporary giving landscape in the United States.",
        "repo": "https://github.com/UrbanInstitute/giving-dashboard",
        "link": "https://apps.urban.org/features/giving-dashboard/",
        "img_dir": "img/overview.png"
    },
    {
        "dir": "projects/leaky-pipeline-advanced-placement-testing/",
        "img_format": "png",
        "img_alt": "Interactive visualization to explore gaps between AP classes enrollment and AP test taking in Florida.",
        "tags": [
            "d3.js",
            "interactive",
            "dataviz"
        ],
        "title": "Leaky Pipeline of Advanced Placement Testing",
        "description": "The gap between AP class enrollment and AP test taking",
        "details_title": "",
        "details": "",
        "repo": "",
        "link": "",
        "img_dir": "img/overview.png"
    },
    {
        "dir": "projects/beyond-education-outcomes/",
        "img_format": "png",
        "img_alt": "Interactive visualization to explore gaps in educational resources for students from different racial and ethnic backgrounds.",
        "tags": [
            "d3.js",
            "interactive",
            "dataviz"
        ],
        "title": "Beyond Education Outcomes",
        "description": "How equitably distributed are educational resources?",
        "details_title": "Beyond Education Outcomes",
        "details": "Student success is typically measured through outcomes, such as test scores and graduation rates. But those measures often overlook the inputs—including access to experienced teachers, counselors, and other resources—that helped create those outcomes. This tool displays the share of students from different racial and ethnic backgrounds who attend schools that have access to experienced teachers, Advanced Placement (AP) classes, and school counselors.",
        "repo": "https://github.com/UrbanInstitute/education-equity-tool",
        "link": "https://apps.urban.org/features/education-equity-tool/",
        "img_dir": "img/overview.png"
    },
    {
        "dir": "projects/give-people-paid-holidays/",
        "img_format": "png",
        "img_alt": "Interactive essay showing that holidays have been more efficient than lockdowns in keeping people at home.",
        "tags": [
            "d3.js",
            "interactive",
            "essay"
        ],
        "title": "Give people paid holidays",
        "description": "What is more efficient at keeping people at home?",
        "details_title": "Give people paid holidays",
        "details": "Since the beginning of the pandemic governments have been enforcing lockdowns to keep people at home and control the spread of the virus. For most families, it is hard to stop working without appropiate economic incentives, and, eventually, are forced to go back to their workplaces as soon as the lockdown is over. The key to finding a way of forcing people staying home while getting paid might be more familiar than what you think and it is (un)surprisingly effective: holidays. By analyzing Google's COVID mobility reports, I explored the patterns of time spent at work versus time spent in residential areas and found that holidays are the events that are most efficient at keeping people at home.",
        "repo": "https://github.com/fbecerra/covid-mobility",
        "link": "https://www.fernandobecerra.com/covid-mobility/",
        "img_dir": "img/overview.png"
    },
    {
        "dir": "projects/covid19-toll-chile/",
        "img_format": "png",
        "img_alt": "Interactive visualizaiton to explore COVID-19 cases and deaths in Chile.",
        "tags": [
            "d3.js",
            "interactive",
            "dataviz"
        ],
        "title": "The COVID-19 toll in Chile",
        "description": "Visualizing Chile's COVID-19 cases and deaths",
        "details_title": "Visualizing Chile's COVID-19 cases",
        "details": "As COVID-19 cases began to steeply increase, graphs became an important way of communicating the impact that the pandemic was having globally. Media outlets, non-profits, government agencies, and other institutions started collecting the number of cases and deaths  in different regions of the world. Many interactive visualizations became very popular overnight as a way to keep track of all that data without it becoming too overwhelming. That motivated me to create one of such visualizations for COVID-19 statistics in Chile, which would focus on making the data at the region and commune levels available for everyone to explore.",
        "repo": "https://github.com/fbecerra/covid19chile",
        "link": "https://www.fernandobecerra.com/covid19chile/",
        "img_dir": "img/overview.jpg"
    },
    {
        "dir": "projects/single-cell-analysis-sequencing/",
        "img_format": "jpg",
        "img_alt": "Interactive visualization to explore the Gen Expression Omnibus dataset and the relation between those genes.",
        "tags": [
            "d3.js",
            "interactive"
        ],
        "title": "Single cell analysis and sequencing",
        "description": "Navigating through the Gen Expression Omnibus dataset",
        "details_title": "",
        "details": "",
        "repo": "",
        "link": "",
        "img_dir": "img/overview.png"
    },
    {
        "dir": "projects/paper-citations-authors-collaborations/",
        "img_format": "png",
        "img_alt": "Interactive network visualization showing citations between papers and collaborations between authors.",
        "tags": [
            "d3.js",
            "interactive"
        ],
        "title": "Paper citations, authors collaborations",
        "description": "Visualizing collaborative networks in academia",
        "details_title": "",
        "details": "",
        "repo": "",
        "link": "",
        "img_dir": "img/overview.png"
    },
    {
        "dir": "projects/hattori-plots/",
        "img_format": "png",
        "img_alt": "Static plots showing relationship between fat and fat-free mass for a cohort of Chilean kids.",
        "tags": [
            "python",
            "data science",
            "dataviz"
        ],
        "title": "Hattori plots",
        "description": "Studying fatty liver desease in Chilean populations",
        "details_title": "",
        "details": "",
        "repo": "",
        "link": "",
        "img_dir": "img/overview.png"
    },
    {
        "dir": "projects/joy-of-parsing/",
        "img_format": "jpg",
        "img_alt": "Interactive visualization to explore Bob Ross paintings and how they cluster together based on the transcripts of the show The Joy of Painting.",
        "tags": [
            "d3.js",
            "python",
            "data science"
        ],
        "title": "The joy of parsing",
        "description": "Visualizing Bob Ross's paintings",
        "details_title": "",
        "details": "",
        "repo": "",
        "link": "",
        "img_dir": "img/overview.png"
    },
    {
        "dir": "projects/formation-first-black-holes/",
        "img_format": "png",
        "img_alt": "Scientific research studying the formation of supermassive black hole seeds in the early Universe.",
        "tags": [
            "python",
            "astronomy",
            "research"
        ],
        "title": "Formation of the first black holes",
        "description": "Simulating the creation of early black holes in the Universe",
        "details_title": "Formation of the first supermassive black holes in the Universe",
        "details": "Black holes have a reputation of being mysterious objects where time and space lose their meaning, and as such they have always attracted our curiosity. So far, astronomers have a pretty good idea of how present-day black holes formed, but the picture is not that clear for the <i>first</i> black holes - those formed in the early days of the Universe. These objects are particularly hard to study since we can't observe them with our current telescopes. In order to study their formation, I ran numerical simulations of the conditions in the early Universe and followed their evolution until they became massive enough to be considered a black hole.",
        "repo": "https://github.com/fbecerra/pacha",
        "link": "https://fernandobecerra.com/astro",
        "img_dir": ""
    },
    {
        "dir": "projects/la-county-covid19-watch/",
        "img_format": "png",
        "img_alt": "Interactive visualizaiton to show the evolution of COVID-19 cases for the LA County Department of Public Health.",
        "tags": [
            "d3.js",
            "data visualization"
        ],
        "title": "LA County's COVID-19 Watch",
        "description": "Tracking LA Country's COVID-19 statistics",
        "details_title": "",
        "details": "",
        "repo": "",
        "link": "",
        "img_dir": "img/overview.png"
    },
    {
        "dir": "projects/astrollytelling/",
        "img_format": "png",
        "img_alt": "Project to teach astronomy concepts through interactive visualizations and essays.",
        "tags": [
            "d3.js",
            "interactive",
            "storytelling"
        ],
        "title": "Astrollytelling",
        "description": "Teaching astronomy through interactive visualizations",
        "details_title": "Teaching astronomy through interactive visualizations",
        "details": "Scientific research is usually made available to the community through publications in renowned journals or presentations at conferences. The audience of these media is often the scientific community, which is used to a very technical language and static graphical representations and hence forces the authors to preserve this format. I wanted to communicate astronomy research in a different format, having the general audience in mind, avoiding jargon and adding interactivity. Since my field of expertise in grad school was astronomy, I decided to create Astrollytelling and use interactive visualizations to explain astronomy concepts.",
        "repo": "https://github.com/astrollytelling",
        "link": "https://astrollytelling.github.io",
        "img_dir": "img/overview.jpg"
    },
    {
        "dir": "projects/plebiscite-new-constitution/",
        "img_format": "png",
        "img_alt": "Interactive visualization showing the timeline of the bills introduced to change the Chilean constitution.",
        "tags": [
            "d3.js",
            "interactive"
        ],
        "title": "Changing the constitution",
        "description": "Exploring bills introduced to reform the Chilean Constitution",
        "details_title": "",
        "details": "",
        "repo": "",
        "link": "",
        "img_dir": "img/overview.png"
    }
];

const logos = [
    {
        "src": "projects/propublica/img/logo.png",
        "alt": "ProPublica logo"
    },
    {
        "src": "projects/beyond-education-outcomes/img/logo.png",
        "alt": "Urban Institute logo"
    },
    {
        "src": "projects/planet/img/logo.png",
        "alt": "Planet Labs logo"
    },
    {
        "src": "projects/hattori-plots/img/logo.png",
        "alt": "Pontifical Catholic University of Chile logo"
    },
    {
        "src": "projects/emteq/img/logo.png",
        "alt": "Emteq Labs logo"
    },
    {
        "src": "projects/gsa/img/logo.png",
        "alt": "Golden Set Analytics logo"
    },
    {
        "src": "projects/la-county-covid19-watch/img/logo.png",
        "alt": "LA County Department of Public Health logo"
    },
    {
        "src": "projects/atomics/img/logo.png",
        "alt": "Copenhagen Atomics logo"
    },
    {
        "src": "projects/paper-citations-authors-collaborations/img/logo.png",
        "alt": "Research Rabbit App logo"
    },
    {
        "src": "projects/single-cell-analysis-sequencing/img/logo.png",
        "alt": "Needle Genomics logo"
    }
];

const showDetails = function(event, d) {
    d3.select("#project-title")
        .html(d.details_title);

    d3.select("#project-description")
        .html(d.details);

    d3.select("#project-repo")
        .attr("href", d.repo);
    
    d3.select("#project-link")
        .attr("href", d.link);

    d3.select("#project-image")
        .attr("src", d.dir + d.img_dir);

    d3.select(".details")
        .style("display", "block");
};

const hideDetails = function() {
    d3.select(".details")
        .style("display", "none");
}

d3.select("#close")
    .on("click", hideDetails)

const wrapper = d3.select("#project-gallery");

const itemCol = wrapper.selectAll(".grid-item")
    .data(projects)
    .join("div")
        .attr("class", "col-lg-4 col-md-4 grid-item mb-4");

const item = itemCol.selectAll(".listing-item")
    .data(d => [d])
    .join("div")
        .attr("class", "listing-item")

const divImage = item.append("div")
    .attr("class", "position-relative");

const linkImage = divImage.append("a")
    .attr("class", "reset-anchor d-block listing-img-holder")
    .on("click", showDetails);

linkImage.append("img")
    .attr("class", "img-fluid")
    .attr("src", d => d.dir + "/img/thumbnail." + d.img_format)
    .attr("alt", d => d.img_alt);

const linkP = linkImage.append("p")
    .attr("class", "mb-0 text-primary small d-flex align-items-center listing-btn");

linkP.append("span")
    .html("Read more");
linkP.append("svg")
    .attr("class", "svg-icon text-primary svg-icon-sm ml-2")
    .append("use")
    .attr("xlink:href", "#arrow-right-1");

const divTags = item.append("div")
    .attr("class", "position-relative pt-2");

const listTags = divTags.append("ul")
    .attr("class", "list-inline listing-tags m-0")

listTags.selectAll("li")
    .data(d => d.tags)
    .join("li")
        .attr("class", "list-inline-item reset-anchor font-weight-normal text-small")
        .html(d => d);

const divTitle = item.append("div")
    .attr("class", "pt-0 pb-2");

divTitle.append("a")
    .attr("class", "reset-anchor")
    .append("h1")
    .attr("class", "h5 listing-item-heading")
    .html(d => d.title)
    .on("click", showDetails);

divTitle.append("h2")
    .attr("class", "text-small mb-0 listing-item-description")
    .html(d => d.description);

const logosDiv = d3.select("#client-logos");

const logoItem = logosDiv.selectAll(".grid-item")
    .data(logos)
    .join("div")
        .attr("class", "col-lg-3 col-md-3 grid-item mb-4");

logoItem.append("div")
    .attr("class", "listing-item")
    .append("div")
    .attr("class", "position-relative")
    .append("img")
        .attr("class", "img-fluid img-logo")
        .attr("src", d => d.src)
        .attr("alt", d => d.alt);
